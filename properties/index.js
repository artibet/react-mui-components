import e from"react";import{TextField as t,Dialog as r,DialogTitle as n,DialogContent as o,DialogActions as a,Button as i,Typography as l,Box as u,ListItem as c,Grid2 as d,Stack as m,Chip as s,Divider as f}from"@mui/material";import{router as p}from"@inertiajs/react";import{ErrorOutline as v,Edit as h}from"@mui/icons-material";import{Controller as b,useForm as x}from"react-hook-form";import{yupResolver as g}from"@hookform/resolvers/yup";import*as y from"yup";import"react-color";import"date-fns";import"date-fns/locale";import"axios";import"react-number-format";import"@mui/x-date-pickers/AdapterDateFnsV3";import"@mui/x-date-pickers/LocalizationProvider";import"@mui/x-date-pickers";import"date-fns/locale/el";import"@mui/icons-material/WarningAmberRounded";import"@mui/icons-material/ErrorOutlineRounded";import"@mui/icons-material/CheckCircleOutlineRounded";function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C.apply(null,arguments)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=["form","name","label","maxLength","required","disabled","autofocus","showErrors","readonly","readonlyBackgroundColor","bold"],k=function(r){var n=r.form,o=r.name,a=r.label,i=r.maxLength,l=void 0===i?255:i,u=r.required,c=void 0!==u&&u,d=r.disabled,m=void 0!==d&&d,s=r.autofocus,f=void 0!==s&&s,p=r.showErrors,v=void 0===p||p,h=r.readonly,x=void 0!==h&&h,g=r.readonlyBackgroundColor,y=void 0===g?"#dddddd":g,E=r.bold,S=void 0!==E&&E,k=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,w),O=n.control,W=n.formState.errors;return e.createElement(b,{name:o,control:O,rules:{required:c,disabled:m},render:function(r){var n,i,u=r.field,d=u.onChange,s=u.onBlur,p=u.value;return e.createElement(t,C({required:c,label:a,value:p,onChange:d,onBlur:s,error:v&&Boolean(null===(n=W[o])||void 0===n?void 0:n.message),fullWidth:!0,helperText:v&&(null===(i=W[o])||void 0===i?void 0:i.message),variant:"outlined",disabled:m,autoFocus:f,slotProps:{input:{maxLength:l,readOnly:x,sx:{fontWeight:S?"bold":"",backgroundColor:x?y:""}}}},k))}})},O=function(t){var c=t.open,d=t.title,m=t.label,s=t.value,f=t.onSubmit,p=t.onCancel,v=t.size,h=void 0===v?"sm":v,b=t.required,E=void 0===b||b,C=t.requiredMessage,S=void 0===C?"Υποχρεωτικό πεδίο":C,w=t.okLabel,O=void 0===w?"ΚΑΤΑΧΩΡΗΣΗ":w,W=t.cancelLabel,j=void 0===W?"ΑΚΥΡΩΣΗ":W,q=t.maxLength,z=void 0===q?255:q,L=t.message,A=void 0===L?null:L,T={text:s||""},B=y.object({text:E?y.string().max(z,"Παρακαλώ πληκτρολογείστε μέχρι ".concat(z," χαρακτήρες")).required(S):y.string().max(z)}),I=x({defaultValues:T,resolver:g(B)});return e.useEffect((function(){c&&(I.clearErrors(),I.setValue("text",s||"",{shouldValidate:!1,shouldDirty:!1,shouldTouch:!1}))}),[c,s]),e.createElement(r,{fullWidth:!0,maxWidth:h,open:c,onClose:function(){},onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),I.handleSubmit((function(e){return f(e.text)}))())},disableRestoreFocus:!0},e.createElement(n,null,d),e.createElement(o,null,A?"string"==typeof A?e.createElement(l,{variant:"body1",color:"text.secondary",sx:{mb:2}},A):e.createElement(u,{sx:{mb:2}},A):null,e.createElement(k,{form:I,name:"text",label:m,required:E,autofocus:!0,maxLength:z,sx:{marginTop:2}})),e.createElement(a,null,e.createElement(i,{color:"success",onClick:I.handleSubmit((function(e){return f(e.text)}))},O),e.createElement(i,{color:"error",onClick:function(){return p()}},j)))};!function(e,t){void 0===t&&(t={});var r=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".chrome-picker {\r\n  -webkit-box-shadow: none !important;\r\n  -moz-box-shadow: none !important;\r\n  box-shadow: none !important;\r\n}");var W=function(t){var r=t.label,n=t.value,o=t.render,a=void 0===o?null:o,u=t.fieldName,b=void 0===u?null:u,x=t.editable,g=void 0!==x&&x,y=t.required,E=void 0===y||y,C=t.placeholder,w=void 0===C?"":C,k=t.modalTitle,W=void 0===k?"Επεξεργασία":k,j=t.updateUrl,q=void 0===j?null:j,z=t.maxLength,L=void 0===z?255:z,A=t.message,T=void 0===A?null:A,B=t.hasDivider,I=void 0===B||B,P=S(e.useState(!1),2),D=P[0],R=P[1],F=!n&&E;return e.createElement(e.Fragment,null,e.createElement(c,{sx:{py:2.5,px:4}},e.createElement(d,{container:!0,spacing:2,sx:{width:"100%"},alignItems:"center"},e.createElement(d,{size:{xs:12,sm:3}},e.createElement(l,{variant:"subtitle2",color:"text.secondary",fontWeight:600},r)),e.createElement(d,{size:{xs:12,sm:6}},E&&!n?e.createElement(m,{direction:"row",spacing:1,alignItems:"center"},e.createElement(l,{variant:"body1",color:"error.main",fontWeight:600},"Δεν έχει καταχωρηθεί"),e.createElement(s,{size:"small",color:"error",variant:"soft",label:"Απαιτείται",icon:e.createElement(v,{sx:{fontSize:"14px !important"}}),sx:{fontWeight:700,height:22}})):a||e.createElement(l,{variant:"body1",fontWeight:500},n||w)),e.createElement(d,{size:{xs:12,sm:3},sx:{display:"flex",justifyContent:"flex-end"}},g&&e.createElement(i,{size:"small",variant:F?"contained":"outlined",color:F?"error":"primary",startIcon:e.createElement(h,{fontSize:"small"}),onClick:function(){return R(!0)},sx:{borderRadius:2,textTransform:"none",fontWeight:700,minWidth:"120px"}},n?"Επεξεργασία":"Συμπλήρωση")))),I&&e.createElement(f,{component:"li"}),e.createElement(O,{open:D,title:W,label:r,value:n,required:E,maxLength:L,onSubmit:function(e){p.put(q,{field:b,value:e},{preserveScroll:!0}),R(!1)},onCancel:function(){return R(!1)},message:T}))};export{W as TextProperty};
